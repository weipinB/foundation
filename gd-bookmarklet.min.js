(function(){var a=function(i){var v=function(){i("#grid-displayer-tools").remove();i("#grid-displayer").remove()},m=false,x=function(F){var z=i("#grid-displayer .gd-container"),G=i("#grid-displayer .gd-row"),D=i("#grid-displayer-tools"),A="",y=parseInt(D.find("#gdt-nbcols").val());if(m){z.removeClass().addClass("gd-container");G.removeClass().addClass("gd-row").css("border-right",0).empty();D.find(".framework-specific").hide()}for(var C=0;C<y;C++){A+='<div class="gd-column">&nbsp;</div>'}G.append(A);var E=G.find(".gd-column"),B=false;switch(F){case"bo":z.addClass("container");G.addClass("row");E.addClass("span1");D.find(".twb").css("display","inline-block");break;case"bf":z.addClass("container-fluid");G.addClass("row-fluid");E.addClass("span1");D.find(".twb").css("display","inline-block");break;case"f3":G.addClass("row");E.addClass("one columns").filter(":odd").addClass("dontshow");B=true;break;case"f2":G.addClass("row");E.addClass("one columns");break}q(D.find("#gdt-color").val(),B);j(D.find("#gdt-opacity").val(),B);if(!m){D.find("#gdt-options").css("display","block");D.find("#gdt-ok").css("display","block");p(D.find("#gdt-zindex").val());i("#grid-displayer").show();m=true}},q=function(y,z){i("#grid-displayer .gd-column:not(.dontshow)").css("background-color",y);if(z){s()}},j=function(y,z){i("#grid-displayer .gd-column:not(.dontshow)").css("opacity",y);if(z){s()}},p=function(y){i("#grid-displayer").css("z-index",y)},s=function(){var y=i("#grid-displayer .gd-column:first-child").css("opacity"),z=i("#grid-displayer .gd-column:first-child").css("background-color").replace("rgb","rgba").replace(")",", "+y+")");i("#grid-displayer .gd-row").css("border-right","2px solid "+z)};if(i("#grid-displayer").length){v()}else{var e=i("body").data("grid-framework"),g=i("body").data("grid-nbcols"),u=i("body").data("grid-color"),d=i("body").data("grid-opacity"),f=i("body").data("grid-zindex"),w=(typeof e==="undefined")?"":e,l=(typeof g==="undefined")?"12":g,o=(typeof u==="undefined")?"black":u,r=(typeof d==="undefined")?"0.3":d,h=(typeof f==="undefined")?"0":f;var k='<div id="grid-displayer" style="display: none;"><div class="gd-container"><div class="gd-row"></div></div></div>',t={bo:"Bootstrap",bf:"Bootstrap (fluid)",f3:"Foundation 3",f2:"Foundation 2"},n='<div id="grid-displayer-tools">';n+='  <div class="gdt-field"><select id="gdt-framework">';n+="    <option>&darr; Choose your framework</option>";i.each(t,function(y,z){n+='<option value="'+y+'"';n+=(y==w)?" selected":"";n+=">"+z+"</option>"});n+='    <option value="tired">I\'m tired of choosing my framework</option>';n+="  </select></div>";n+='  <div id="gdt-options" class="gdt-field">';n+='    <div><label for="gdt-color">Columns colour</label><input type="text" id="gdt-color" value="'+o+'" /></div>';n+='<div><label for="gdt-opacity">Opacity</label><input type="text" id="gdt-opacity" value="'+r+'" /></div>';n+='<div class="framework-specific twb"><label for="gdt-nbcols">Nb cols</label><input type="text" id="gdt-nbcols" value="'+l+'" /></div>';n+='<div><label for="gdt-zindex">z-index</label><input type="text" id="gdt-zindex" value="'+h+'" /></div>';n+="  </div>";n+='  <div class="gdt-button" id="gdt-ok"><a href="#">OK</a></div>';n+='  <div class="gdt-button"><a href="#" id="gdt-close">Close</a></div>';n+="</div>";i("head").append("<link rel='stylesheet' type='text/css' href='http://alefeuvre.github.com/foundation-grid-displayer/stylesheets/gd-bookmarklet.min.css'>");i("body").prepend(k).prepend(n);i("#grid-displayer-tools").delay(1200).fadeTo("slow",0.1);if(typeof e!=="undefined"){x(w)}i("#grid-displayer-tools #gdt-framework").change(function(){if(i(this).val()=="tired"){window.open("http://snipt.net/jiraisurfer/custom-parameters-for-foundation-grid-displayer/")}else{w=i(this).val();if(w=="f3"||w=="f2"){i("#grid-displayer-tools #gdt-nbcols").val(12)}x(w)}});i("#grid-displayer-tools #gdt-nbcols").change(function(){x(w)});i("#grid-displayer-tools #gdt-color").change(function(){q(i(this).val(),w=="f3")});i("#grid-displayer-tools #gdt-opacity").change(function(){j(i(this).val(),w=="f3")});i("#grid-displayer-tools #gdt-zindex").change(function(){p(i(this).val())});i("#grid-displayer-tools #gdt-close").click(function(){v()})}};if(!window.jQuery){var b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript";c.src="http://code.jquery.com/jquery-1.10.0.min.js";c.onload=function(){a(window.jQuery)};b.appendChild(c)}else{a(window.jQuery)}})();